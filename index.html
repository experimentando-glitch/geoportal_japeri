<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geoportal Japeri - Sistema de Informa√ß√µes Geogr√°ficas</title>
    <meta name="description"
        content="Geoportal interativo do munic√≠pio de Japeri com dados geogr√°ficos, demogr√°ficos e urbanos">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Proj4 for coordinate transformation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.0/proj4.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.2/proj4leaflet.min.js"></script>

    <!-- Application Script -->
    <script src="app.js" defer></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 2L4 8V14C4 22 16 30 16 30C16 30 28 22 28 14V8L16 2Z" fill="url(#gradient1)" />
                        <circle cx="16" cy="14" r="4" fill="white" opacity="0.9" />
                        <defs>
                            <linearGradient id="gradient1" x1="4" y1="2" x2="28" y2="30" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#667eea" />
                                <stop offset="1" stop-color="#764ba2" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div class="logo-text">
                    <h1>Geoportal Japeri</h1>
                    <p>Sistema de Informa√ß√µes Geogr√°ficas</p>
                </div>
            </div>

            <div class="header-actions">
                <button class="btn-secondary" id="infoBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" />
                        <path d="M10 10V14M10 6V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    Informa√ß√µes
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <h2 class="section-title">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M2 2H8V8H2V2Z" stroke="currentColor" stroke-width="1.5" />
                        <path d="M10 2H16V8H10V2Z" stroke="currentColor" stroke-width="1.5" />
                        <path d="M2 10H8V16H2V10Z" stroke="currentColor" stroke-width="1.5" />
                        <path d="M10 10H16V16H10V10Z" stroke="currentColor" stroke-width="1.5" />
                    </svg>
                    Mapas de Fundo
                </h2>
                <div class="basemap-selector">
                    <div class="basemap-option active" data-basemap="streets">
                        <div class="basemap-preview"
                            style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
                            <span class="basemap-icon">üó∫Ô∏è</span>
                        </div>
                        <span class="basemap-name">Ruas</span>
                    </div>
                    <div class="basemap-option" data-basemap="satellite">
                        <div class="basemap-preview"
                            style="background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);">
                            <span class="basemap-icon">üõ∞Ô∏è</span>
                        </div>
                        <span class="basemap-name">Sat√©lite</span>
                    </div>
                    <div class="basemap-option" data-basemap="terrain">
                        <div class="basemap-preview"
                            style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                            <span class="basemap-icon">‚õ∞Ô∏è</span>
                        </div>
                        <span class="basemap-name">Terreno</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h2 class="section-title">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M2 4H16M2 9H16M2 14H16" stroke="currentColor" stroke-width="1.5"
                            stroke-linecap="round" />
                    </svg>
                    Camadas de Dados
                </h2>
                <div class="layers-list">
                    <div class="layer-item" data-layer="bairros">
                        <label class="layer-checkbox">
                            <input type="checkbox" id="layer-bairros" checked>
                            <span class="checkmark"></span>
                        </label>
                        <div class="layer-info">
                            <span class="layer-name">Bairros</span>
                            <span class="layer-color" style="background: #667eea;"></span>
                        </div>
                    </div>

                    <div class="layer-item" data-layer="setores">
                        <label class="layer-checkbox">
                            <input type="checkbox" id="layer-setores">
                            <span class="checkmark"></span>
                        </label>
                        <div class="layer-info">
                            <span class="layer-name">Setores Censit√°rios</span>
                            <span class="layer-color" style="background: #f093fb;"></span>
                        </div>
                    </div>

                    <div class="layer-item" data-layer="urb_rur">
                        <label class="layer-checkbox">
                            <input type="checkbox" id="layer-urb_rur">
                            <span class="checkmark"></span>
                        </label>
                        <div class="layer-info">
                            <span class="layer-name">Urbano / Rural</span>
                            <span class="layer-color" style="background: #4facfe;"></span>
                        </div>
                    </div>

                    <div class="layer-item" data-layer="deficit_hab">
                        <label class="layer-checkbox">
                            <input type="checkbox" id="layer-deficit_hab">
                            <span class="checkmark"></span>
                        </label>
                        <div class="layer-info">
                            <span class="layer-name">D√©ficit Habitacional</span>
                            <span class="layer-color" style="background: #fa709a;"></span>
                        </div>
                    </div>

                    <div class="layer-item" data-layer="residencia">
                        <label class="layer-checkbox">
                            <input type="checkbox" id="layer-residencia">
                            <span class="checkmark"></span>
                        </label>
                        <div class="layer-info">
                            <span class="layer-name">Resid√™ncias</span>
                            <span class="layer-color" style="background: #43e97b;"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar-section" id="attributeSelector" style="display: none;">
                <h2 class="section-title">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M2 4H16M2 9H16M2 14H10" stroke="currentColor" stroke-width="1.5"
                            stroke-linecap="round" />
                    </svg>
                    Atributos dos Setores
                </h2>
                <p class="attribute-description">Selecione os dados que deseja visualizar:</p>
                <div class="attributes-list" id="attributesList">
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="CD_SETOR" checked>
                        <span class="checkmark"></span>
                        <span class="attribute-name">C√≥digo do Setor</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="NM_MUN" checked>
                        <span class="checkmark"></span>
                        <span class="attribute-name">Munic√≠pio</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="NM_DIST" checked>
                        <span class="checkmark"></span>
                        <span class="attribute-name">Distrito</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="AREA_KM2" checked>
                        <span class="checkmark"></span>
                        <span class="attribute-name">√Årea (km¬≤)</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="v0001" checked>
                        <span class="checkmark"></span>
                        <span class="attribute-name">Popula√ß√£o Total</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="v0002" checked>
                        <span class="checkmark"></span>
                        <span class="attribute-name">Domic√≠lios Particulares</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="v0003">
                        <span class="checkmark"></span>
                        <span class="attribute-name">Domic√≠lios Ocupados</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="v0004">
                        <span class="checkmark"></span>
                        <span class="attribute-name">Domic√≠lios Vagos</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="v0005">
                        <span class="checkmark"></span>
                        <span class="attribute-name">Moradores por Domic√≠lio</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="v0006">
                        <span class="checkmark"></span>
                        <span class="attribute-name">√Årea M√©dia (km¬≤)</span>
                    </label>
                    <label class="attribute-checkbox">
                        <input type="checkbox" value="v0007" checked>
                        <span class="checkmark"></span>
                        <span class="attribute-name">Densidade Demogr√°fica</span>
                    </label>
                </div>
            </div>

            <div class="sidebar-section" id="thematicMappingPanel" style="display: none;">
                <h2 class="section-title">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <rect x="2" y="2" width="4" height="4" fill="currentColor" opacity="0.3" />
                        <rect x="7" y="2" width="4" height="4" fill="currentColor" opacity="0.5" />
                        <rect x="12" y="2" width="4" height="4" fill="currentColor" opacity="0.7" />
                        <rect x="2" y="7" width="4" height="4" fill="currentColor" opacity="0.5" />
                        <rect x="7" y="7" width="4" height="4" fill="currentColor" opacity="0.7" />
                        <rect x="12" y="7" width="4" height="4" fill="currentColor" opacity="0.9" />
                        <rect x="2" y="12" width="4" height="4" fill="currentColor" opacity="0.7" />
                        <rect x="7" y="12" width="4" height="4" fill="currentColor" opacity="0.9" />
                        <rect x="12" y="12" width="4" height="4" fill="currentColor" />
                    </svg>
                    Mapa Tem√°tico
                </h2>
                <p class="thematic-description">Visualize os dados dos setores censit√°rios por cores</p>

                <div class="thematic-selector-container">
                    <label for="thematicAttributeSelect" class="thematic-label">Selecione o atributo:</label>
                    <select id="thematicAttributeSelect" class="thematic-select">
                        <option value="">-- Nenhum (cores padr√£o) --</option>
                        <optgroup label="üìä Dados Demogr√°ficos">
                            <option value="v0001">Popula√ß√£o Total</option>
                            <option value="v0002">Domic√≠lios Particulares Permanentes</option>
                            <option value="v0003">Domic√≠lios Particulares Ocupados</option>
                            <option value="v0004">Domic√≠lios Particulares Vagos</option>
                            <option value="v0005">Moradores por Domic√≠lio</option>
                            <option value="v0006">√Årea M√©dia por Domic√≠lio (km¬≤)</option>
                            <option value="v0007">Densidade Demogr√°fica (hab/km¬≤)</option>
                            <option value="Resid√™ncias">Resid√™ncias</option>
                        </optgroup>
                        <optgroup label="üìö Educa√ß√£o">
                            <option value="15-29 Analfabetos">15-29 Analfabetos</option>
                            <option value="30-59 Analfabetos">30-59 Analfabetos</option>
                            <option value="60+ Analfabetos">60+ Analfabetos</option>
                            <option value="Total_Analfabetos">Total Analfabetos</option>
                        </optgroup>
                        <optgroup label="üë∂ Faixas Et√°rias">
                            <option value="0 a 4 anos">0 a 4 anos</option>
                            <option value="5 a 9 anos">5 a 9 anos</option>
                            <option value="9 a 14 anos">9 a 14 anos</option>
                            <option value="70 anos +">70 anos +</option>
                            <option value="Total de crian√ßas de 0 - 14 anos e idoso + 70 anos">Total crian√ßas (0-14) e
                                idosos (70+)</option>
                        </optgroup>
                        <optgroup label="üé® Ra√ßa/Cor">
                            <option value="Branca">Branca</option>
                            <option value="Preta">Preta</option>
                            <option value="Amarela">Amarela</option>
                            <option value="Parda">Parda</option>
                            <option value="Ind√≠gena">Ind√≠gena</option>
                        </optgroup>
                        <optgroup label="üí∞ Renda">
                            <option value="Pessoas respons√°veis em domic√≠lios particulares permanentes ocupados">Pessoas
                                Respons√°veis</option>
                            <option value="Valor do rendimento nominal m√©dio mensal das pessoas respons√°veis">Rendimento
                                M√©dio Mensal</option>
                        </optgroup>
                        <optgroup label="üíß Abastecimento de √Ågua">
                            <option value="Utiliza rede geral de distribui√ß√£o">Rede Geral</option>
                            <option value="Utiliza po√ßo profundo ou artesiano">Po√ßo Profundo/Artesiano</option>
                            <option value="Utiliza po√ßo raso, fre√°tico ou cacimba">Po√ßo Raso/Cacimba</option>
                            <option value="Utiliza fonte, nascente ou mina">Fonte/Nascente</option>
                            <option value="Utiliza carro-pipa">Carro-pipa</option>
                            <option value="Utiliza √°gua da chuva armazenada">√Ågua da Chuva</option>
                            <option value="Utiliza rios, a√ßudes, c√≥rregos, lagos e igarap√©s">Rios/Lagos</option>
                            <option value="Total que n√£o utiliza Rede geral de distribui√ß√£o">Sem Rede Geral</option>
                        </optgroup>
                        <optgroup label="üöΩ Esgotamento Sanit√°rio">
                            <option value="Rede geral ou pluvial">Rede Geral/Pluvial</option>
                            <option value="fossa s√©ptica ou fossa filtro ligada √† rede">Fossa S√©ptica (ligada)</option>
                            <option value="fossa s√©ptica ou fossa filtro n√£o ligada √† rede">Fossa S√©ptica (n√£o ligada)
                            </option>
                            <option value="Fossa rudimentar ou buraco">Fossa Rudimentar</option>
                            <option value="Vala">Vala</option>
                            <option value="Rio, lago, c√≥rrego ou mar">Rio/Lago/Mar</option>
                            <option value="N√£o utilizam a rede geral ou pluvial">Sem Rede Geral</option>
                        </optgroup>
                        <optgroup label="üóëÔ∏è Destino do Lixo">
                            <option value="Lixo coletado no domic√≠lio por servi√ßo de limpeza">Coletado no Domic√≠lio
                            </option>
                            <option value="Lixo depositado em ca√ßamba de servi√ßo de limpeza">Depositado em Ca√ßamba
                            </option>
                            <option value="Lixo queimado na propriedade">Queimado</option>
                            <option value="Lixo enterrado na propriedade">Enterrado</option>
                            <option value="Lixo jogado em terreno baldio, encosta ou √°rea p√∫blica">Jogado em Terreno
                            </option>
                            <option value="Lixo n√£o coletado por servi√ßo de limpeza">N√£o Coletado</option>
                        </optgroup>
                        <optgroup label="üè† Tipo de Moradia">
                            <option value="Casa">Casa</option>
                            <option value="Casa de vila ou em condom√≠nio">Casa de Vila/Condom√≠nio</option>
                            <option value="apartamento">Apartamento</option>
                            <option value="habita√ß√£o em casa de c√¥modos ou corti√ßo">C√¥modos/Corti√ßo</option>
                            <option value="Estrutura residencial permanente degradada ou inacabada">Estrutura Degradada
                            </option>
                            <option value="Moradias tempor√°rias e improvisadas">Moradias Improvisadas</option>
                        </optgroup>
                    </select>

                    <button id="applyThematicBtn" class="btn-thematic" disabled>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 2V14M2 8H14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        Aplicar Mapa Tem√°tico
                    </button>

                    <button id="resetThematicBtn" class="btn-thematic-reset" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2 2L14 14M2 14L14 2" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                        Resetar Cores
                    </button>
                </div>
            </div>

            <div class="sidebar-section">
                <h2 class="section-title">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <rect x="2" y="2" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5" />
                        <path d="M6 2V16M12 2V16M2 9H16" stroke="currentColor" stroke-width="1.5" />
                    </svg>
                    Legenda
                </h2>
                <div class="legend-content" id="legendContent">
                    <p class="legend-placeholder">Selecione uma camada para ver a legenda</p>
                </div>
            </div>

            <div class="sidebar-section" id="attributeTablePanel" style="display: none;">
                <h2 class="section-title">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <rect x="2" y="2" width="14" height="3" stroke="currentColor" stroke-width="1.5" />
                        <rect x="2" y="5" width="14" height="3" stroke="currentColor" stroke-width="1.5" />
                        <rect x="2" y="8" width="14" height="3" stroke="currentColor" stroke-width="1.5" />
                        <rect x="2" y="11" width="14" height="3" stroke="currentColor" stroke-width="1.5" />
                    </svg>
                    Tabela de Atributos
                    <button class="close-table-btn" id="closeTableBtn" title="Fechar tabela">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M1 1L13 13M1 13L13 1" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                </h2>
                <div class="attribute-table-info">
                    <p class="table-description">Clique em um setor censit√°rio no mapa para ver seus atributos</p>
                </div>
                <div class="attribute-table-container" id="attributeTableContainer">
                    <table class="attribute-table" id="attributeTable">
                        <thead>
                            <tr>
                                <th class="sortable-header">
                                    Atributo
                                    <span class="sort-indicator">‚ñº</span>
                                </th>
                                <th class="sortable-header clickable-header" data-attribute-key="">
                                    Valor
                                    <span class="thematic-hint">Clique para mapear</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="attributeTableBody">
                            <tr>
                                <td colspan="2" class="no-data">Nenhum setor selecionado</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </aside>

        <!-- Map Container -->
        <div class="map-container">
            <div id="map"></div>

            <!-- Map Controls -->
            <div class="map-controls">
                <button class="map-control-btn" id="zoomInBtn" title="Aumentar zoom">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
                <button class="map-control-btn" id="zoomOutBtn" title="Diminuir zoom">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
                <button class="map-control-btn" id="homeBtn" title="Voltar ao in√≠cio">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M3 10L10 3L17 10M5 8V17H15V8" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>

            <!-- Loading Indicator -->
            <div class="loading-indicator" id="loadingIndicator">
                <div class="spinner"></div>
                <p>Carregando dados geogr√°ficos...</p>
            </div>
        </div>
    </main>

    <!-- Info Modal -->
    <div class="modal" id="infoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sobre o Geoportal Japeri</h2>
                <button class="modal-close" id="closeModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p>O <strong>Geoportal Japeri</strong> √© um sistema de informa√ß√µes geogr√°ficas interativo que apresenta
                    dados espaciais do munic√≠pio de Japeri, Rio de Janeiro.</p>

                <h3>Camadas Dispon√≠veis:</h3>
                <ul>
                    <li><strong>Bairros:</strong> Divis√£o administrativa dos bairros do munic√≠pio</li>
                    <li><strong>Setores Censit√°rios:</strong> Unidades territoriais do IBGE para coleta de dados</li>
                    <li><strong>Urbano/Rural:</strong> Classifica√ß√£o das √°reas urbanas e rurais</li>
                    <li><strong>D√©ficit Habitacional:</strong> Indicadores de necessidade habitacional</li>
                    <li><strong>Resid√™ncias:</strong> Localiza√ß√£o das unidades residenciais</li>
                </ul>

                <h3>Como Usar:</h3>
                <ul>
                    <li>Selecione diferentes mapas de fundo (Ruas, Sat√©lite, Terreno)</li>
                    <li>Ative/desative camadas usando os controles na barra lateral</li>
                    <li>Clique nos elementos do mapa para ver informa√ß√µes detalhadas</li>
                    <li>Use os controles de zoom para navegar pelo mapa</li>
                </ul>
            </div>
        </div>
    </div>
</body>

</html>